// Copyright (c) 2009-2010 Satoshi Nakamoto
// Copyright (c) 2009-2021 The Bitcoin Core developers
// Distributed under the MIT software license, see the accompanying
// file COPYING or http://www.opensource.org/licenses/mit-license.php.

#ifndef BITCOIN_CHAINPARAMS_H
#define BITCOIN_CHAINPARAMS_H

#include <chainparamsbase.h>
#include <consensus/params.h>
#include <netaddress.h>
#include <primitives/block.h>
#include <protocol.h>
#include <util/hash_type.h>
#include <libethashseal/GenesisInfo.h>

#include <memory>
#include <string>
#include <vector>

typedef std::map<int, uint256> MapCheckpoints;

struct CCheckpointData {
    MapCheckpoints mapCheckpoints;

    int GetHeight() const {
        const auto& final_checkpoint = mapCheckpoints.rbegin();
        return final_checkpoint->first /* height */;
    }
};

struct AssumeutxoHash : public BaseHash<uint256> {
    explicit AssumeutxoHash(const uint256& hash) : BaseHash(hash) {}
};

/**
 * Holds configuration for use during UTXO snapshot load and validation. The contents
 * here are security critical, since they dictate which UTXO snapshots are recognized
 * as valid.
 */
struct AssumeutxoData {
    //! The expected hash of the deserialized UTXO set.
    const AssumeutxoHash hash_serialized;

    //! Used to populate the nChainTx value, which is used during BlockManager::LoadBlockIndex().
    //!
    //! We need to hardcode the value here because this is computed cumulatively using block data,
    //! which we do not necessarily have at the time of snapshot load.
    const unsigned int nChainTx;
};

using MapAssumeutxo = std::map<int, const AssumeutxoData>;

/**
 * Holds various statistics on transactions within a chain. Used to estimate
 * verification progress during chain sync.
 *
 * See also: CChainParams::TxData, GuessVerificationProgress.
 */
struct ChainTxData {
    int64_t nTime;    //!< UNIX timestamp of last known number of transactions
    int64_t nTxCount; //!< total number of transactions between genesis and that timestamp
    double dTxRate;   //!< estimated number of transactions per second after that timestamp
};

const std::string DELEGATIONS_CONTRACT_CODE="608060405234801561001057600080fd5b50600436106100415760003560e01c80633d666e8b146100465780634c0e968c14610050578063bffe348614610138575b600080fd5b61004e61023c565b005b6101366004803603606081101561006657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803560ff169060200190929190803590602001906401000000008111156100b057600080fd5b8201836020820111156100c257600080fd5b803590602001918460018302840111640100000000831117156100e457600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610428565b005b61017a6004803603602081101561014e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610dbb565b604051808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018460ff1660ff16815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b838110156101fe5780820151818401526020810190506101e3565b50505050905090810190601f16801561022b5780820380516001836020036101000a031916815260200191505b509550505050505060405180910390f35b60008060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001015414156102d7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252603281526020018061174a6032913960400191505060405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff166000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f7fe28d2d0b16cf95b5ea93f4305f89133b3892543e616381a1336fc1e7a01fa060405160405180910390a36000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600080820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556000820160146101000a81549060ff021916905560018201600090556002820160006104249190611564565b5050565b3373ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614156104ca576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f43616e6e6f742064656c656761746520746f2073656c6600000000000000000081525060200191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141561056d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f496e76616c6964207374616b657220616464726573730000000000000000000081525060200191505060405180910390fd5b60648260ff1611156105ca576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260348152602001806116966034913960400191505060405180910390fd5b6041815114610624576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260248152602001806116ca6024913960400191505060405180910390fd5b61062f818433610eb0565b6106a1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260158152602001807f496e76616c696420506f44207369676e6174757265000000000000000000000081525060200191505060405180910390fd5b8273ffffffffffffffffffffffffffffffffffffffff166000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614801561079057508160ff166000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160149054906101000a900460ff1660ff16145b80156108c55750806040516020018082805190602001908083835b602083106107ce57805182526020820191506020810190506020830392506107ab565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051602081830303815290604052805190602001206000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160405160200180828054600181600116156101000203166002900480156108a85780601f106108865761010080835404028352918201916108a8565b820191906000526020600020905b815481529060010190602001808311610894575b505091505060405160208183030381529060405280519060200120145b15610938576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260198152602001807f44656c65676174696f6e20616c7265616479206578697374730000000000000081525060200191505060405180910390fd5b60008060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001015414158015610a1757508273ffffffffffffffffffffffffffffffffffffffff166000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614155b15610ad8573373ffffffffffffffffffffffffffffffffffffffff166000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f7fe28d2d0b16cf95b5ea93f4305f89133b3892543e616381a1336fc1e7a01fa060405160405180910390a35b3373ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fa23803f3b2b56e71f2921c22b23c32ef596a439dbe03f7250e6b58a30eb910b5844385604051808460ff1660ff16815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015610b7c578082015181840152602081019050610b61565b50505050905090810190601f168015610ba95780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a3826000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160146101000a81548160ff021916908360ff160217905550436000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010181905550806000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206002019080519060200190610d2d9291906115ac565b50621e94805a1015610d8a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252605c8152602001806116ee605c913960600191505060405180910390fd5b60005a90505b600115610db5576000600181905550621e84805a820310610db057610db5565b610d90565b50505050565b60006020528060005260406000206000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060000160149054906101000a900460ff1690806001015490806002018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ea65780601f10610e7b57610100808354040283529160200191610ea6565b820191906000526020600020905b815481529060010190602001808311610e8957829003601f168201915b5050505050905084565b600060606040518060400160405280601781526020017f155174756d205369676e6564204d6573736167653a0a2800000000000000000081525090506060610ef7856111ad565b90506000610f12610f0b88600060016113db565b6000611467565b90506000610f2d610f2689600160206113db565b600061148f565b90506000610f48610f418a602160206113db565b600061148f565b9050600060028087876040516020018083805190602001908083835b60208310610f875780518252602082019150602081019050602083039250610f64565b6001836020036101000a03801982511681845116808217855250505050505090500182805190602001908083835b60208310610fd85780518252602082019150602081019050602083039250610fb5565b6001836020036101000a038019825116818451168082178552505050505050905001925050506040516020818303038152906040526040518082805190602001908083835b60208310611040578051825260208201915060208101905060208303925061101d565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015611082573d6000803e3d6000fd5b5050506040513d602081101561109757600080fd5b8101908080519060200190929190505050604051602001808281526020019150506040516020818303038152906040526040518082805190602001908083835b602083106110fa57805182526020820191506020810190506020830392506110d7565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa15801561113c573d6000803e3d6000fd5b5050506040513d602081101561115157600080fd5b810190808051906020019092919050505090508773ffffffffffffffffffffffffffffffffffffffff16611187828686866114b7565b73ffffffffffffffffffffffffffffffffffffffff161496505050505050509392505050565b606060008273ffffffffffffffffffffffffffffffffffffffff1660001b905060606040518060400160405280601081526020017f30313233343536373839616263646566000000000000000000000000000000008152509050606060286040519080825280601f01601f19166020018201604052801561123d5781602001600182028038833980820191505090505b50905060008090505b60148110156113655782600485600c84016020811061126157fe5b1a60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916901c60f81c60ff168151811061129957fe5b602001015160f81c60f81b8260028302815181106112b357fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535082600f60f81b85600c8401602081106112f757fe5b1a60f81b1660f81c60ff168151811061130c57fe5b602001015160f81c60f81b82600283026001018151811061132957fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053508080600101915050611246565b50806040516020018082805190602001908083835b6020831061139d578051825260208201915060208101905060208303925061137a565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040529350505050919050565b6060818301845110156113ed57600080fd5b606082156000811461140a5760405191506020820160405261145b565b6040519150601f8416801560200281840101858101878315602002848b0101015b81831015611448578051835260208301925060208101905061142b565b50868552601f19601f8301166040525050505b50809150509392505050565b6000600182018351101561147a57600080fd5b60008260018501015190508091505092915050565b600060208201835110156114a257600080fd5b60008260208501015190508091505092915050565b60006114c161162c565b8560001c816000600481106114d257fe5b6020020181815250508460ff16816001600481106114ec57fe5b6020020181815250508360001c8160026004811061150657fe5b6020020181815250508260001c8160036004811061152057fe5b60200201818152505061153161164e565b6020816080846085600019fa61154657600080fd5b8060006001811061155357fe5b602002015192505050949350505050565b50805460018160011615610100020316600290046000825580601f1061158a57506115a9565b601f0160209004906000526020600020908101906115a89190611670565b5b50565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106115ed57805160ff191683800117855561161b565b8280016001018555821561161b579182015b8281111561161a5782518255916020019190600101906115ff565b5b5090506116289190611670565b5090565b6040518060800160405280600490602082028038833980820191505090505090565b6040518060200160405280600190602082028038833980820191505090505090565b61169291905b8082111561168e576000816000905550600101611676565b5090565b9056fe496e76616c696420666565202520286d75737420626520616e20696e7465676572206265747765656e203020616e642031303029506f4420696e76616c69642073697a652c2073686f756c642062652036352062797465734e6f7420656e6f75676820676173206c65667420746f20636f6e73756d652c20746865207265636f6d6d656e64656420676173206c696d697420746f2063616c6c20746869732066756e6374696f6e20697320322c3235302c30303044656c65676174696f6e20646f6573206e6f742065786973742c20736f2069742063616e6e6f742062652072656d6f766564a265627a7a723158204b0af0e10415b6d9014f408a210216f51cf7797f82c4fdeb31ee65c408f42f3364736f6c634300050f0032";

const std::string SUPPLY_CONTROL_CONTRACT_CODE="608060405234801561001057600080fd5b50600436106101c35760003560e01c80638fb872ba116100f9578063d547741f11610097578063dec9d94211610071578063dec9d9421461053f578063eb9019d41461055b578063f8ce560a1461058b578063fe0d94c1146105bb576101c3565b8063d547741f146104d4578063d663fa50146104f0578063da9fc9261461050c576101c3565b80639f080402116100d35780639f0804021461045e578063a217fddf1461047a578063b536818a14610498578063b8f9240c146104b6576101c3565b80638fb872ba146103e257806391d14854146104125780639510118114610442576101c3565b806342d21ef7116101665780635678138811610140578063567813881461034857806375b238fc146103785780637bcb87a9146103965780638a6f5a59146103b2576101c3565b806342d21ef7146102ca57806343859632146102fa578063555567c01461032a576101c3565b80631c9b2f35116101a25780631c9b2f3514610232578063248a9ca3146102625780632f2ff15d1461029257806336568abe146102ae576101c3565b80624fba00146101c857806301ffc9a7146101e457806302a251a314610214575b600080fd5b6101e260048036038101906101dd9190613820565b6105eb565b005b6101fe60048036038101906101f991906138a5565b6106cd565b60405161020b91906138ed565b60405180910390f35b61021c610747565b6040516102299190613921565b60405180910390f35b61024c60048036038101906102479190613968565b610751565b60405161025991906139e6565b60405180910390f35b61027c60048036038101906102779190613a37565b61079c565b6040516102899190613a73565b60405180910390f35b6102ac60048036038101906102a79190613a8e565b6107bc565b005b6102c860048036038101906102c39190613a8e565b6107dd565b005b6102e460048036038101906102df9190613968565b610860565b6040516102f19190613b45565b60405180910390f35b610314600480360381019061030f9190613b60565b6109a4565b60405161032191906138ed565b60405180910390f35b6103326109b8565b60405161033f9190613921565b60405180910390f35b610362600480360381019061035d9190613bd9565b6109c1565b60405161036f9190613921565b60405180910390f35b610380610b21565b60405161038d9190613a73565b60405180910390f35b6103b060048036038101906103ab9190613820565b610b45565b005b6103cc60048036038101906103c79190613968565b610c27565b6040516103d99190613ce8565b60405180910390f35b6103fc60048036038101906103f79190613e14565b610d7f565b6040516104099190613921565b60405180910390f35b61042c60048036038101906104279190613a8e565b6116f9565b60405161043991906138ed565b60405180910390f35b61045c60048036038101906104579190613820565b611764565b005b61047860048036038101906104739190613820565b611845565b005b610482611b66565b60405161048f9190613a73565b60405180910390f35b6104a0611b6d565b6040516104ad9190613a73565b60405180910390f35b6104be611b91565b6040516104cb9190613921565b60405180910390f35b6104ee60048036038101906104e99190613a8e565b611b9b565b005b61050a60048036038101906105059190613820565b611bbc565b005b61052660048036038101906105219190613968565b611c9d565b60405161053694939291906141f5565b60405180910390f35b610559600480360381019061055491906146a5565b611efe565b005b61057560048036038101906105709190614774565b611f71565b6040516105829190613921565b60405180910390f35b6105a560048036038101906105a09190613968565b611f85565b6040516105b29190613921565b60405180910390f35b6105d560048036038101906105d09190613968565b611faf565b6040516105e29190613921565b60405180910390f35b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461067b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161067290614811565b60405180910390fd5b6106a57fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775826107bc565b600360008154809291906106b890614860565b91905055506106ca8160006001612093565b50565b60007f7965db0b000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161480610740575061073f82612146565b5b9050919050565b60006103e8905090565b6107596134d1565b6007600083815260200190815260200160002060405180606001604052908160008201548152602001600182015481526020016002820154815250509050919050565b600060016000838152602001908152602001600020600101549050919050565b6107c58261079c565b6107ce816121b0565b6107d883836121c4565b505050565b6107e56122a4565b73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610852576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108499061491a565b60405180910390fd5b61085c82826122ac565b5050565b600080600080848152602001908152602001600020905060008160000154036108be576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108b590614986565b60405180910390fd5b8060010160199054906101000a900460ff16156108df57600591505061099f565b8060010160189054906101000a900460ff161561090057600291505061099f565b60004390508160010160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1681101561093a5760009250505061099f565b8160010160109054906101000a900467ffffffffffffffff1667ffffffffffffffff16811161096e5760019250505061099f565b6109778461238e565b801561098857506109878461253e565b5b156109985760039250505061099f565b6004925050505b919050565b60006109b08383612578565b905092915050565b60006064905090565b6000806000808581526020019081526020016000209050600160058111156109ec576109eb613ace565b5b6109f585610860565b6005811115610a0757610a06613ace565b5b14610a47576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a3e906149f2565b60405180910390fd5b6000610a75338360010160089054906101000a900467ffffffffffffffff1667ffffffffffffffff166125e0565b905060008111610aba576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ab190614a5e565b60405180910390fd5b610ac6853386846125f4565b3373ffffffffffffffffffffffffffffffffffffffff167f251f168c3d37dca4f3922f4aa12852da0c3de8ef70710e0cf58eba85805168a28686604051610b0e929190614a8d565b60405180910390a2809250505092915050565b7fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c2177581565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610bd5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bcc90614811565b60405180910390fd5b610bff7f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba82611b9b565b60036000815480929190610c1290614ab6565b9190505550610c248160016000612093565b50565b610c2f6134f2565b6000808381526020019081526020016000206040518060e0016040529081600082015481526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160109054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160189054906101000a900460ff161515151581526020016001820160199054906101000a900460ff161515151581526020016002820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815250509050919050565b6000610dab7fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775336116f9565b80610ddc5750610ddb7f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba336116f9565b5b610e1b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e1290614b2b565b60405180910390fd5b438811610e5d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e5490614b97565b60405180910390fd5b848490508787905014610ea5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e9c90614c29565b60405180910390fd5b828290508787905014610eed576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ee490614cbb565b60405180910390fd5b600088604051602001610f009190614cfc565b6040516020818303038152906040528051906020012060001c90506000600960008b81526020019081526020016000206040518060800160405290816000820154815260200160018201805480602002602001604051908101604052809291908181526020018280548015610f9457602002820191906000526020600020905b815481526020019060010190808311610f80575b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b8282101561106e578382906000526020600020018054610fe190614d46565b80601f016020809104026020016040519081016040528092919081815260200182805461100d90614d46565b801561105a5780601f1061102f5761010080835404028352916020019161105a565b820191906000526020600020905b81548152906001019060200180831161103d57829003601f168201915b505050505081526020019060010190610fc2565b50505050815260200160038201805480602002602001604051908101604052809291908181526020016000905b828210156111475783829060005260206000200180546110ba90614d46565b80601f01602080910402602001604051908101604052809291908181526020018280546110e690614d46565b80156111335780601f1061110857610100808354040283529160200191611133565b820191906000526020600020905b81548152906001019060200180831161111657829003601f168201915b50505050508152602001906001019061109b565b505050508152505090506000816000015114611198576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161118f90614dc3565b60405180910390fd5b6000816020015151146111e0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d790614e2f565b60405180910390fd5b600081604001515114611228576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161121f90614ec1565b60405180910390fd5b600081606001515114611270576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161126790614f2d565b60405180910390fd5b6000600a600084815260200190815260200160002060405180608001604052908160008201548152602001600182018054806020026020016040519081016040528092919081815260200182805480156112e957602002820191906000526020600020905b8154815260200190600101908083116112d5575b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b828210156113c357838290600052602060002001805461133690614d46565b80601f016020809104026020016040519081016040528092919081815260200182805461136290614d46565b80156113af5780601f10611384576101008083540402835291602001916113af565b820191906000526020600020905b81548152906001019060200180831161139257829003601f168201915b505050505081526020019060010190611317565b50505050815260200160038201805480602002602001604051908101604052809291908181526020016000905b8282101561149c57838290600052602060002001805461140f90614d46565b80601f016020809104026020016040519081016040528092919081815260200182805461143b90614d46565b80156114885780601f1061145d57610100808354040283529160200191611488565b820191906000526020600020905b81548152906001019060200180831161146b57829003601f168201915b5050505050815260200190600101906113f0565b5050505081525050905060008160000151146114ed576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114e490614f99565b60405180910390fd5b600081602001515114611535576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161152c9061502b565b60405180910390fd5b60008160400151511461157d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611574906150bd565b60405180910390fd5b6000816060015151146115c5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115bc9061514f565b60405180910390fd5b898980806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f82011690508083019250505050505050816020018190525087879061161c919061516f565b81604001819052508585906116319190615184565b816060018190525080600a6000858152602001908152602001600020600082015181600001556020820151816001019080519060200190611673929190613567565b5060408201518160020190805190602001906116909291906135b4565b5060608201518160030190805190602001906116ad92919061360d565b509050506116ba836127a8565b50827fc2c021f5d73c63c481d336fbbafec58f694fc45095f00b02d2deb8cca59afe0760405160405180910390a2829350505050979650505050505050565b60006001600084815260200190815260200160002060000160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146117f4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117eb90614811565b60405180910390fd5b61181e7fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c2177582611b9b565b6003600081548092919061183190614ab6565b919050555061184281600080612093565b50565b600260009054906101000a900460ff161561185f57600080fd5b61186c6000801b33612922565b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663850d975860006040518263ffffffff1660e01b815260040161190b91906151de565b600060405180830381865afa158015611928573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f8201168201806040525081019061195191906152d1565b905060008151905060005b818110156119e2576119a87fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c2177584838151811061199b5761199a61531a565b5b60200260200101516107bc565b6119cf8382815181106119be576119bd61531a565b5b602002602001015160006001612093565b80806119da90614860565b91505061195c565b506000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663850d975860016040518263ffffffff1660e01b8152600401611a419190615384565b600060405180830381865afa158015611a5e573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f82011682018060405250810190611a8791906152d1565b905060008151905060005b81811015611b1757611ade7f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba848381518110611ad157611ad061531a565b5b60200260200101516107bc565b611b04838281518110611af457611af361531a565b5b6020026020010151600180612093565b8080611b0f90614860565b915050611a92565b508083611b24919061539f565b600381905550611b376000801b86612922565b611b446000801b33611b9b565b6001600260006101000a81548160ff0219169083151502179055505050505050565b6000801b81565b7f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba81565b6000600354905090565b611ba48261079c565b611bad816121b0565b611bb783836122ac565b505050565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611c4c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611c4390614811565b60405180910390fd5b611c767f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba826107bc565b60036000815480929190611c8990614860565b9190505550611c9a81600180612093565b50565b600060608060606000600960008781526020019081526020016000206040518060800160405290816000820154815260200160018201805480602002602001604051908101604052809291908181526020018280548015611d1d57602002820191906000526020600020905b815481526020019060010190808311611d09575b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b82821015611df7578382906000526020600020018054611d6a90614d46565b80601f0160208091040260200160405190810160405280929190818152602001828054611d9690614d46565b8015611de35780601f10611db857610100808354040283529160200191611de3565b820191906000526020600020905b815481529060010190602001808311611dc657829003601f168201915b505050505081526020019060010190611d4b565b50505050815260200160038201805480602002602001604051908101604052809291908181526020016000905b82821015611ed0578382906000526020600020018054611e4390614d46565b80601f0160208091040260200160405190810160405280929190818152602001828054611e6f90614d46565b8015611ebc5780601f10611e9157610100808354040283529160200191611ebc565b820191906000526020600020905b815481529060010190602001808311611e9f57829003601f168201915b505050505081526020019060010190611e24565b5050505081525050905080600001518160200151826040015183606001519450945094509450509193509193565b600060096000878152602001908152602001600020905084816000018190555083816001019080519060200190611f36929190613567565b5082816002019080519060200190611f4f9291906135b4565b5081816003019080519060200190611f6892919061360d565b50505050505050565b6000611f7d83836125e0565b905092915050565b600060016002611f9484612930565b611f9e9190615402565b611fa8919061539f565b9050919050565b600060036005811115611fc557611fc4613ace565b5b611fce83610860565b6005811115611fe057611fdf613ace565b5b14612020576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016120179061547f565b60405180910390fd5b6000806000848152602001908152602001600020905060018160010160196101000a81548160ff021916908315150217905550827f712ae1383f79ac853f8d882153778e0260ef8f03b504e2866e0593e04d2b291f60405160405180910390a261208983612962565b5082915050919050565b60004390506000600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090506120f78183856120ec5760006120ef565b60015b60ff16612c9d565b50506000612106600684612cba565b90508315612121578080612119906154c7565b915050612130565b808061212c9061550b565b9150505b61213c60068483612c9d565b5050505050505050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b6121c1816121bc6122a4565b612d3a565b50565b6121ce82826116f9565b6122a057600180600084815260200190815260200160002060000160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055506122456122a4565b73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45b5050565b600033905090565b6122b682826116f9565b1561238a5760006001600084815260200190815260200160002060000160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555061232f6122a4565b73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16837ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b60405160405180910390a45b5050565b6000806000808481526020019081526020016000206040518060e0016040529081600082015481526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160109054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160189054906101000a900460ff161515151581526020016001820160199054906101000a900460ff161515151581526020016002820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681525050905060006124f5826020015167ffffffffffffffff16611f85565b9050600060076000868152602001908152602001600020905081816001015410158061253457508181600001548260020154612531919061539f565b10155b9350505050919050565b6000806007600084815260200190815260200160002090508060020154816000015461256a919061539f565b816001015411915050919050565b60006008600084815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b60006125ec8383612dbf565b905092915050565b60006007600086815260200190815260200160002090506126158585612578565b15612655576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161264c90615580565b60405180910390fd5b60038360ff161061269b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612692906155ec565b60405180910390fd5b600060028111156126af576126ae613ace565b5b60ff168360ff16036126db57818160000160008282546126cf919061539f565b92505081905550612738565b600160028111156126ef576126ee613ace565b5b60ff168360ff160361271b578181600101600082825461270f919061539f565b92505081905550612737565b8181600201600082825461272f919061539f565b925050819055505b5b60016008600087815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055505050505050565b60008060008084815260200190815260200160002090506000816000015414612806576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016127fd90615658565b60405180910390fd5b828160000181905550438160010160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506128426109b8565b4361284d919061539f565b8160010160086101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555061287f610747565b8160010160089054906101000a900467ffffffffffffffff1667ffffffffffffffff166128ac919061539f565b8160010160106101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550338160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082915050919050565b61292c82826121c4565b5050565b600061293d600683612cba565b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff169050919050565b600080600a600084815260200190815260200160002060405180608001604052908160008201548152602001600182018054806020026020016040519081016040528092919081815260200182805480156129dc57602002820191906000526020600020905b8154815260200190600101908083116129c8575b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b82821015612ab6578382906000526020600020018054612a2990614d46565b80601f0160208091040260200160405190810160405280929190818152602001828054612a5590614d46565b8015612aa25780601f10612a7757610100808354040283529160200191612aa2565b820191906000526020600020905b815481529060010190602001808311612a8557829003601f168201915b505050505081526020019060010190612a0a565b50505050815260200160038201805480602002602001604051908101604052809291908181526020016000905b82821015612b8f578382906000526020600020018054612b0290614d46565b80601f0160208091040260200160405190810160405280929190818152602001828054612b2e90614d46565b8015612b7b5780601f10612b5057610100808354040283529160200191612b7b565b820191906000526020600020905b815481529060010190602001808311612b5e57829003601f168201915b505050505081526020019060010190612ae3565b50505050815250509050600a6000848152602001908152602001600020600080820160009055600182016000612bc59190613666565b600282016000612bd59190613687565b600382016000612be591906136a8565b50506000600960008360000151815260200190815260200160002090508381600001819055508160200151816001019080519060200190612c27929190613567565b508160400151816002019080519060200190612c449291906135b4565b508160600151816003019080519060200190612c6192919061360d565b5081600001517ffd97efaeec370430401c335a89c9485668b53055a6507f1764ca4c8d4b4e590760405160405180910390a28392505050919050565b600080612cae856000018585612e34565b91509150935093915050565b600080836000018054905090506000612cd985600001856000856131ba565b905060008114612d2d57612cfc85600001600183612cf79190615678565b61322d565b60000160049054906101000a90047bffffffffffffffffffffffffffffffffffffffffffffffffffffffff16612d30565b60005b9250505092915050565b612d4482826116f9565b612dbb57612d5181613242565b612d5f8360001c602061326f565b604051602001612d70929190615780565b6040516020818303038152906040526040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612db291906157f3565b60405180910390fd5b5050565b600080600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209050612e0d8184612cba565b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1691505092915050565b60008060008580549050905060008111156130ca576000612e6187600184612e5c9190615678565b61322d565b6040518060400160405290816000820160009054906101000a900463ffffffff1663ffffffff1663ffffffff1681526020016000820160049054906101000a90047bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff168152505090508563ffffffff16816000015163ffffffff161115612f55576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612f4c90615861565b60405180910390fd5b8563ffffffff16816000015163ffffffff1603612fd95784612f8388600185612f7e9190615678565b61322d565b60000160046101000a8154817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff02191690837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1602179055506130b9565b8660405180604001604052808863ffffffff168152602001877bffffffffffffffffffffffffffffffffffffffffffffffffffffffff168152509080600181540180825580915050600190039060005260206000200160009091909190915060008201518160000160006101000a81548163ffffffff021916908363ffffffff16021790555060208201518160000160046101000a8154817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff02191690837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff16021790555050505b8060200151859350935050506131b2565b8560405180604001604052808763ffffffff168152602001867bffffffffffffffffffffffffffffffffffffffffffffffffffffffff168152509080600181540180825580915050600190039060005260206000200160009091909190915060008201518160000160006101000a81548163ffffffff021916908363ffffffff16021790555060208201518160000160046101000a8154817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff02191690837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff160217905550505060008492509250505b935093915050565b60005b818310156132225760006131d184846134ab565b90508463ffffffff166131e4878361322d565b60000160009054906101000a900463ffffffff1663ffffffff16111561320c5780925061321c565b600181613219919061539f565b93505b506131bd565b819050949350505050565b60008260005281602060002001905092915050565b60606132688273ffffffffffffffffffffffffffffffffffffffff16601460ff1661326f565b9050919050565b6060600060028360026132829190615881565b61328c919061539f565b67ffffffffffffffff8111156132a5576132a461424f565b5b6040519080825280601f01601f1916602001820160405280156132d75781602001600182028036833780820191505090505b5090507f30000000000000000000000000000000000000000000000000000000000000008160008151811061330f5761330e61531a565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053507f7800000000000000000000000000000000000000000000000000000000000000816001815181106133735761337261531a565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600060018460026133b39190615881565b6133bd919061539f565b90505b600181111561345d577f3031323334353637383961626364656600000000000000000000000000000000600f8616601081106133ff576133fe61531a565b5b1a60f81b8282815181106134165761341561531a565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600485901c94508061345690614ab6565b90506133c0565b50600084146134a1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016134989061590f565b60405180910390fd5b8091505092915050565b600060028284186134bc9190615402565b8284166134c9919061539f565b905092915050565b60405180606001604052806000815260200160008152602001600081525090565b6040518060e0016040528060008152602001600067ffffffffffffffff168152602001600067ffffffffffffffff168152602001600067ffffffffffffffff168152602001600015158152602001600015158152602001600073ffffffffffffffffffffffffffffffffffffffff1681525090565b8280548282559060005260206000209081019282156135a3579160200282015b828111156135a2578251825591602001919060010190613587565b5b5090506135b091906136c9565b5090565b8280548282559060005260206000209081019282156135fc579160200282015b828111156135fb5782518290816135eb9190615ad1565b50916020019190600101906135d4565b5b50905061360991906136e6565b5090565b828054828255906000526020600020908101928215613655579160200282015b828111156136545782518290816136449190615bfe565b509160200191906001019061362d565b5b509050613662919061370a565b5090565b508054600082559060005260206000209081019061368491906136c9565b50565b50805460008255906000526020600020908101906136a591906136e6565b50565b50805460008255906000526020600020908101906136c6919061370a565b50565b5b808211156136e25760008160009055506001016136ca565b5090565b5b8082111561370657600081816136fd919061372e565b506001016136e7565b5090565b5b8082111561372a5760008181613721919061376e565b5060010161370b565b5090565b50805461373a90614d46565b6000825580601f1061374c575061376b565b601f01602090049060005260206000209081019061376a91906136c9565b5b50565b50805461377a90614d46565b6000825580601f1061378c57506137ab565b601f0160209004906000526020600020908101906137aa91906136c9565b5b50565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006137ed826137c2565b9050919050565b6137fd816137e2565b811461380857600080fd5b50565b60008135905061381a816137f4565b92915050565b600060208284031215613836576138356137b8565b5b60006138448482850161380b565b91505092915050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b6138828161384d565b811461388d57600080fd5b50565b60008135905061389f81613879565b92915050565b6000602082840312156138bb576138ba6137b8565b5b60006138c984828501613890565b91505092915050565b60008115159050919050565b6138e7816138d2565b82525050565b600060208201905061390260008301846138de565b92915050565b6000819050919050565b61391b81613908565b82525050565b60006020820190506139366000830184613912565b92915050565b61394581613908565b811461395057600080fd5b50565b6000813590506139628161393c565b92915050565b60006020828403121561397e5761397d6137b8565b5b600061398c84828501613953565b91505092915050565b61399e81613908565b82525050565b6060820160008201516139ba6000850182613995565b5060208201516139cd6020850182613995565b5060408201516139e06040850182613995565b50505050565b60006060820190506139fb60008301846139a4565b92915050565b6000819050919050565b613a1481613a01565b8114613a1f57600080fd5b50565b600081359050613a3181613a0b565b92915050565b600060208284031215613a4d57613a4c6137b8565b5b6000613a5b84828501613a22565b91505092915050565b613a6d81613a01565b82525050565b6000602082019050613a886000830184613a64565b92915050565b60008060408385031215613aa557613aa46137b8565b5b6000613ab385828601613a22565b9250506020613ac48582860161380b565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110613b0e57613b0d613ace565b5b50565b6000819050613b1f82613afd565b919050565b6000613b2f82613b11565b9050919050565b613b3f81613b24565b82525050565b6000602082019050613b5a6000830184613b36565b92915050565b60008060408385031215613b7757613b766137b8565b5b6000613b8585828601613953565b9250506020613b968582860161380b565b9150509250929050565b600060ff82169050919050565b613bb681613ba0565b8114613bc157600080fd5b50565b600081359050613bd381613bad565b92915050565b60008060408385031215613bf057613bef6137b8565b5b6000613bfe85828601613953565b9250506020613c0f85828601613bc4565b9150509250929050565b600067ffffffffffffffff82169050919050565b613c3681613c19565b82525050565b613c45816138d2565b82525050565b613c54816137e2565b82525050565b60e082016000820151613c706000850182613995565b506020820151613c836020850182613c2d565b506040820151613c966040850182613c2d565b506060820151613ca96060850182613c2d565b506080820151613cbc6080850182613c3c565b5060a0820151613ccf60a0850182613c3c565b5060c0820151613ce260c0850182613c4b565b50505050565b600060e082019050613cfd6000830184613c5a565b92915050565b600080fd5b600080fd5b600080fd5b60008083601f840112613d2857613d27613d03565b5b8235905067ffffffffffffffff811115613d4557613d44613d08565b5b602083019150836020820283011115613d6157613d60613d0d565b5b9250929050565b60008083601f840112613d7e57613d7d613d03565b5b8235905067ffffffffffffffff811115613d9b57613d9a613d08565b5b602083019150836020820283011115613db757613db6613d0d565b5b9250929050565b60008083601f840112613dd457613dd3613d03565b5b8235905067ffffffffffffffff811115613df157613df0613d08565b5b602083019150836020820283011115613e0d57613e0c613d0d565b5b9250929050565b60008060008060008060006080888a031215613e3357613e326137b8565b5b6000613e418a828b01613953565b975050602088013567ffffffffffffffff811115613e6257613e616137bd565b5b613e6e8a828b01613d12565b9650965050604088013567ffffffffffffffff811115613e9157613e906137bd565b5b613e9d8a828b01613d68565b9450945050606088013567ffffffffffffffff811115613ec057613ebf6137bd565b5b613ecc8a828b01613dbe565b925092505092959891949750929550565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000613f158383613995565b60208301905092915050565b6000602082019050919050565b6000613f3982613edd565b613f438185613ee8565b9350613f4e83613ef9565b8060005b83811015613f7f578151613f668882613f09565b9750613f7183613f21565b925050600181019050613f52565b5085935050505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b60005b83811015613ff2578082015181840152602081019050613fd7565b60008484015250505050565b6000601f19601f8301169050919050565b600061401a82613fb8565b6140248185613fc3565b9350614034818560208601613fd4565b61403d81613ffe565b840191505092915050565b6000614054838361400f565b905092915050565b6000602082019050919050565b600061407482613f8c565b61407e8185613f97565b93508360208202850161409085613fa8565b8060005b858110156140cc57848403895281516140ad8582614048565b94506140b88361405c565b925060208a01995050600181019050614094565b50829750879550505050505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b60006141318261410a565b61413b8185614115565b935061414b818560208601613fd4565b61415481613ffe565b840191505092915050565b600061416b8383614126565b905092915050565b6000602082019050919050565b600061418b826140de565b61419581856140e9565b9350836020820285016141a7856140fa565b8060005b858110156141e357848403895281516141c4858261415f565b94506141cf83614173565b925060208a019950506001810190506141ab565b50829750879550505050505092915050565b600060808201905061420a6000830187613912565b818103602083015261421c8186613f2e565b905081810360408301526142308185614069565b905081810360608301526142448184614180565b905095945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b61428782613ffe565b810181811067ffffffffffffffff821117156142a6576142a561424f565b5b80604052505050565b60006142b96137ae565b90506142c5828261427e565b919050565b600067ffffffffffffffff8211156142e5576142e461424f565b5b602082029050602081019050919050565b6000614309614304846142ca565b6142af565b9050808382526020820190506020840283018581111561432c5761432b613d0d565b5b835b8181101561435557806143418882613953565b84526020840193505060208101905061432e565b5050509392505050565b600082601f83011261437457614373613d03565b5b81356143848482602086016142f6565b91505092915050565b600067ffffffffffffffff8211156143a8576143a761424f565b5b602082029050602081019050919050565b600080fd5b600067ffffffffffffffff8211156143d9576143d861424f565b5b6143e282613ffe565b9050602081019050919050565b82818337600083830152505050565b600061441161440c846143be565b6142af565b90508281526020810184848401111561442d5761442c6143b9565b5b6144388482856143ef565b509392505050565b600082601f83011261445557614454613d03565b5b81356144658482602086016143fe565b91505092915050565b600061448161447c8461438d565b6142af565b905080838252602082019050602084028301858111156144a4576144a3613d0d565b5b835b818110156144eb57803567ffffffffffffffff8111156144c9576144c8613d03565b5b8086016144d68982614440565b855260208501945050506020810190506144a6565b5050509392505050565b600082601f83011261450a57614509613d03565b5b813561451a84826020860161446e565b91505092915050565b600067ffffffffffffffff82111561453e5761453d61424f565b5b602082029050602081019050919050565b600067ffffffffffffffff82111561456a5761456961424f565b5b61457382613ffe565b9050602081019050919050565b600061459361458e8461454f565b6142af565b9050828152602081018484840111156145af576145ae6143b9565b5b6145ba8482856143ef565b509392505050565b600082601f8301126145d7576145d6613d03565b5b81356145e7848260208601614580565b91505092915050565b60006146036145fe84614523565b6142af565b9050808382526020820190506020840283018581111561462657614625613d0d565b5b835b8181101561466d57803567ffffffffffffffff81111561464b5761464a613d03565b5b80860161465889826145c2565b85526020850194505050602081019050614628565b5050509392505050565b600082601f83011261468c5761468b613d03565b5b813561469c8482602086016145f0565b91505092915050565b600080600080600060a086880312156146c1576146c06137b8565b5b60006146cf88828901613953565b95505060206146e088828901613953565b945050604086013567ffffffffffffffff811115614701576147006137bd565b5b61470d8882890161435f565b935050606086013567ffffffffffffffff81111561472e5761472d6137bd565b5b61473a888289016144f5565b925050608086013567ffffffffffffffff81111561475b5761475a6137bd565b5b61476788828901614677565b9150509295509295909350565b6000806040838503121561478b5761478a6137b8565b5b60006147998582860161380b565b92505060206147aa85828601613953565b9150509250929050565b600082825260208201905092915050565b7f4e6f74207174756d20636f6e7472616374206164647265737300000000000000600082015250565b60006147fb6019836147b4565b9150614806826147c5565b602082019050919050565b6000602082019050818103600083015261482a816147ee565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061486b82613908565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361489d5761489c614831565b5b600182019050919050565b7f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636560008201527f20726f6c657320666f722073656c660000000000000000000000000000000000602082015250565b6000614904602f836147b4565b915061490f826148a8565b604082019050919050565b60006020820190508181036000830152614933816148f7565b9050919050565b7f70726f706f73616c206973206e6f742065786973747300000000000000000000600082015250565b60006149706016836147b4565b915061497b8261493a565b602082019050919050565b6000602082019050818103600083015261499f81614963565b9050919050565b7f70726f706f73616c206973206e6f742061637469766500000000000000000000600082015250565b60006149dc6016836147b4565b91506149e7826149a6565b602082019050919050565b60006020820190508181036000830152614a0b816149cf565b9050919050565b7f6e6f20766f746520726967687400000000000000000000000000000000000000600082015250565b6000614a48600d836147b4565b9150614a5382614a12565b602082019050919050565b60006020820190508181036000830152614a7781614a3b565b9050919050565b614a8781613ba0565b82525050565b6000604082019050614aa26000830185613912565b614aaf6020830184614a7e565b9392505050565b6000614ac182613908565b915060008203614ad457614ad3614831565b5b600182039050919050565b7f4e6f7420612061646d696e206f7220676f762061636f6f756e74000000000000600082015250565b6000614b15601a836147b4565b9150614b2082614adf565b602082019050919050565b60006020820190508181036000830152614b4481614b08565b9050919050565b7f626c6f636b206e756d62657220697320616c7265616479207061737300000000600082015250565b6000614b81601c836147b4565b9150614b8c82614b4b565b602082019050919050565b60006020820190508181036000830152614bb081614b74565b9050919050565b7f6c656e67746873206f66205f616d6f756e747320616e64205f7363726970745460008201527f797065732073686f756c6420626520657175616c000000000000000000000000602082015250565b6000614c136034836147b4565b9150614c1e82614bb7565b604082019050919050565b60006020820190508181036000830152614c4281614c06565b9050919050565b7f6c656e67746873206f66205f616d6f756e747320616e64205f7363726970747360008201527f2073686f756c6420626520657175616c00000000000000000000000000000000602082015250565b6000614ca56030836147b4565b9150614cb082614c49565b604082019050919050565b60006020820190508181036000830152614cd481614c98565b9050919050565b6000819050919050565b614cf6614cf182613908565b614cdb565b82525050565b6000614d088284614ce5565b60208201915081905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680614d5e57607f821691505b602082108103614d7157614d70614d17565b5b50919050565b7f6d696e7420697320616c72656164792063726561746564000000000000000000600082015250565b6000614dad6017836147b4565b9150614db882614d77565b602082019050919050565b60006020820190508181036000830152614ddc81614da0565b9050919050565b7f6c697374206f6620616d6f756e74732073686f756c6420626520656d70747900600082015250565b6000614e19601f836147b4565b9150614e2482614de3565b602082019050919050565b60006020820190508181036000830152614e4881614e0c565b9050919050565b7f6c697374206f662073637269707454797065732073686f756c6420626520656d60008201527f7074790000000000000000000000000000000000000000000000000000000000602082015250565b6000614eab6023836147b4565b9150614eb682614e4f565b604082019050919050565b60006020820190508181036000830152614eda81614e9e565b9050919050565b7f6c697374206f6620736372697074732073686f756c6420626520656d70747900600082015250565b6000614f17601f836147b4565b9150614f2282614ee1565b602082019050919050565b60006020820190508181036000830152614f4681614f0a565b9050919050565b7f70726f706f73616c20697320616c726561647920637265617465640000000000600082015250565b6000614f83601b836147b4565b9150614f8e82614f4d565b602082019050919050565b60006020820190508181036000830152614fb281614f76565b9050919050565b7f5b70726f706f73616c5d206c697374206f6620616d6f756e74732073686f756c60008201527f6420626520656d70747900000000000000000000000000000000000000000000602082015250565b6000615015602a836147b4565b915061502082614fb9565b604082019050919050565b6000602082019050818103600083015261504481615008565b9050919050565b7f5b70726f706f73616c5d206c697374206f66207363726970745479706573207360008201527f686f756c6420626520656d707479000000000000000000000000000000000000602082015250565b60006150a7602e836147b4565b91506150b28261504b565b604082019050919050565b600060208201905081810360008301526150d68161509a565b9050919050565b7f5b70726f706f73616c5d206c697374206f6620736372697074732073686f756c60008201527f6420626520656d70747900000000000000000000000000000000000000000000602082015250565b6000615139602a836147b4565b9150615144826150dd565b604082019050919050565b600060208201905081810360008301526151688161512c565b9050919050565b600061517c36848461446e565b905092915050565b60006151913684846145f0565b905092915050565b6000819050919050565b6000819050919050565b60006151c86151c36151be84615199565b6151a3565b613908565b9050919050565b6151d8816151ad565b82525050565b60006020820190506151f360008301846151cf565b92915050565b600067ffffffffffffffff8211156152145761521361424f565b5b602082029050602081019050919050565b600081519050615234816137f4565b92915050565b600061524d615248846151f9565b6142af565b905080838252602082019050602084028301858111156152705761526f613d0d565b5b835b8181101561529957806152858882615225565b845260208401935050602081019050615272565b5050509392505050565b600082601f8301126152b8576152b7613d03565b5b81516152c884826020860161523a565b91505092915050565b6000602082840312156152e7576152e66137b8565b5b600082015167ffffffffffffffff811115615305576153046137bd565b5b615311848285016152a3565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6000819050919050565b600061536e61536961536484615349565b6151a3565b613908565b9050919050565b61537e81615353565b82525050565b60006020820190506153996000830184615375565b92915050565b60006153aa82613908565b91506153b583613908565b92508282019050808211156153cd576153cc614831565b5b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b600061540d82613908565b915061541883613908565b925082615428576154276153d3565b5b828204905092915050565b7f50726f706f73616c206973206e6f742073756363657373656400000000000000600082015250565b60006154696019836147b4565b915061547482615433565b602082019050919050565b600060208201905081810360008301526154988161545c565b9050919050565b60007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff82169050919050565b60006154d28261549f565b91507bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203615500576154ff614831565b5b600182019050919050565b60006155168261549f565b91506000820361552957615528614831565b5b600182039050919050565b7f616c726561647920766f74650000000000000000000000000000000000000000600082015250565b600061556a600c836147b4565b915061557582615534565b602082019050919050565b600060208201905081810360008301526155998161555d565b9050919050565b7f696e76616c696420766f74650000000000000000000000000000000000000000600082015250565b60006155d6600c836147b4565b91506155e1826155a0565b602082019050919050565b60006020820190508181036000830152615605816155c9565b9050919050565b7f70726f706f73616c20616c726561647920657869737473000000000000000000600082015250565b60006156426017836147b4565b915061564d8261560c565b602082019050919050565b6000602082019050818103600083015261567181615635565b9050919050565b600061568382613908565b915061568e83613908565b92508282039050818111156156a6576156a5614831565b5b92915050565b600081905092915050565b7f416363657373436f6e74726f6c3a206163636f756e7420000000000000000000600082015250565b60006156ed6017836156ac565b91506156f8826156b7565b601782019050919050565b600061570e82613fb8565b61571881856156ac565b9350615728818560208601613fd4565b80840191505092915050565b7f206973206d697373696e6720726f6c6520000000000000000000000000000000600082015250565b600061576a6011836156ac565b915061577582615734565b601182019050919050565b600061578b826156e0565b91506157978285615703565b91506157a28261575d565b91506157ae8284615703565b91508190509392505050565b60006157c582613fb8565b6157cf81856147b4565b93506157df818560208601613fd4565b6157e881613ffe565b840191505092915050565b6000602082019050818103600083015261580d81846157ba565b905092915050565b7f436865636b706f696e743a20696e76616c6964206b6579000000000000000000600082015250565b600061584b6017836147b4565b915061585682615815565b602082019050919050565b6000602082019050818103600083015261587a8161583e565b9050919050565b600061588c82613908565b915061589783613908565b92508282026158a581613908565b915082820484148315176158bc576158bb614831565b5b5092915050565b7f537472696e67733a20686578206c656e67746820696e73756666696369656e74600082015250565b60006158f96020836147b4565b9150615904826158c3565b602082019050919050565b60006020820190508181036000830152615928816158ec565b9050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026159917fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82615954565b61599b8683615954565b95508019841693508086168417925050509392505050565b60006159ce6159c96159c484613908565b6151a3565b613908565b9050919050565b6000819050919050565b6159e8836159b3565b6159fc6159f4826159d5565b848454615961565b825550505050565b600090565b615a11615a04565b615a1c8184846159df565b505050565b5b81811015615a4057615a35600082615a09565b600181019050615a22565b5050565b601f821115615a8557615a568161592f565b615a5f84615944565b81016020851015615a6e578190505b615a82615a7a85615944565b830182615a21565b50505b505050565b600082821c905092915050565b6000615aa860001984600802615a8a565b1980831691505092915050565b6000615ac18383615a97565b9150826002028217905092915050565b615ada82613fb8565b67ffffffffffffffff811115615af357615af261424f565b5b615afd8254614d46565b615b08828285615a44565b600060209050601f831160018114615b3b5760008415615b29578287015190505b615b338582615ab5565b865550615b9b565b601f198416615b498661592f565b60005b82811015615b7157848901518255600182019150602085019450602081019050615b4c565b86831015615b8e5784890151615b8a601f891682615a97565b8355505b6001600288020188555050505b505050505050565b60008190508160005260206000209050919050565b601f821115615bf957615bca81615ba3565b615bd384615944565b81016020851015615be2578190505b615bf6615bee85615944565b830182615a21565b50505b505050565b615c078261410a565b67ffffffffffffffff811115615c2057615c1f61424f565b5b615c2a8254614d46565b615c35828285615bb8565b600060209050601f831160018114615c685760008415615c56578287015190505b615c608582615ab5565b865550615cc8565b601f198416615c7686615ba3565b60005b82811015615c9e57848901518255600182019150602085019450602081019050615c79565b86831015615cbb5784890151615cb7601f891682615a97565b8355505b6001600288020188555050505b50505050505056fea26469706673582212207b4c5b1f2cc9fc7a9b46fce35f643aebe32ed4057fa9ade457b0285ab165425464736f6c63430008120033";

/**
 * CChainParams defines various tweakable parameters of a given instance of the
 * Bitcoin system.
 */
class CChainParams
{
public:
    enum Base58Type {
        PUBKEY_ADDRESS,
        SCRIPT_ADDRESS,
        SECRET_KEY,
        EXT_PUBLIC_KEY,
        EXT_SECRET_KEY,

        MAX_BASE58_TYPES
    };

    const Consensus::Params& GetConsensus() const { return consensus; }
    const CMessageHeader::MessageStartChars& MessageStart() const { return pchMessageStart; }
    uint16_t GetDefaultPort() const { return nDefaultPort; }
    uint16_t GetDefaultPort(Network net) const
    {
        return net == NET_I2P ? I2P_SAM31_PORT : GetDefaultPort();
    }
    uint16_t GetDefaultPort(const std::string& addr) const
    {
        CNetAddr a;
        return a.SetSpecial(addr) ? GetDefaultPort(a.GetNetwork()) : GetDefaultPort();
    }

    const CBlock& GenesisBlock() const { return genesis; }
    /** Default value for -checkmempool and -checkblockindex argument */
    bool DefaultConsistencyChecks() const { return fDefaultConsistencyChecks; }
    /** Policy: Filter transactions that do not match well-defined patterns */
    bool RequireStandard() const { return fRequireStandard; }
    /** If this chain is exclusively used for testing */
    bool IsTestChain() const { return m_is_test_chain; }
    /** If this chain allows time to be mocked */
    bool IsMockableChain() const { return m_is_mockable_chain; }
    uint64_t PruneAfterHeight() const { return nPruneAfterHeight; }
    /** Minimum free space (in GB) needed for data directory */
    uint64_t AssumedBlockchainSize() const { return m_assumed_blockchain_size; }
    /** Minimum free space (in GB) needed for data directory when pruned; Does not include prune target*/
    uint64_t AssumedChainStateSize() const { return m_assumed_chain_state_size; }
    /** Whether it is possible to mine blocks on demand (no retargeting) */
    bool MineBlocksOnDemand() const { return fMineBlocksOnDemand; }
    /** Return the network string */
    std::string NetworkIDString() const { return strNetworkID; }
    /** Return the list of hostnames to look up for DNS seeds */
    const std::vector<std::string>& DNSSeeds() const { return vSeeds; }
    const std::vector<unsigned char>& Base58Prefix(Base58Type type) const { return base58Prefixes[type]; }
    const std::string& Bech32HRP() const { return bech32_hrp; }
    const std::vector<uint8_t>& FixedSeeds() const { return vFixedSeeds; }
    const CCheckpointData& Checkpoints() const { return checkpointData; }
    std::string EVMGenesisInfo() const;
    std::string EVMGenesisInfo(int nHeight) const;
    std::string EVMGenesisInfo(const dev::eth::EVMConsensus& evmConsensus) const;
    void UpdateOpSenderBlockHeight(int nHeight);
    void UpdateBtcEcrecoverBlockHeight(int nHeight);
    void UpdateConstantinopleBlockHeight(int nHeight);
    void UpdateDifficultyChangeBlockHeight(int nHeight);
    void UpdateOfflineStakingBlockHeight(int nHeight);
    void UpdateSupplyControlBlockHeight(int nHeight);
    void UpdateDelegationsAddress(const uint160& address);
    void UpdateSupplyControlAddress(const uint160& address);
    void UpdateLastMPoSBlockHeight(int nHeight);
    void UpdateReduceBlocktimeHeight(int nHeight);
    void UpdatePowAllowMinDifficultyBlocks(bool fValue);
    void UpdatePowNoRetargeting(bool fValue);
    void UpdatePoSNoRetargeting(bool fValue);
    void UpdateMuirGlacierHeight(int nHeight);
    bool HasHardwareWalletSupport() const { return fHasHardwareWalletSupport; }
    void UpdateLondonHeight(int nHeight);
    void UpdateTaprootHeight(int nHeight);
    //! Get allowed assumeutxo configuration.
    //! @see ChainstateManager
    const MapAssumeutxo& Assumeutxo() const { return m_assumeutxo_data; }

    const ChainTxData& TxData() const { return chainTxData; }
protected:
    dev::eth::Network GetEVMNetwork() const;
    CChainParams() {}

    Consensus::Params consensus;
    CMessageHeader::MessageStartChars pchMessageStart;
    uint16_t nDefaultPort;
    uint64_t nPruneAfterHeight;
    uint64_t m_assumed_blockchain_size;
    uint64_t m_assumed_chain_state_size;
    std::vector<std::string> vSeeds;
    std::vector<unsigned char> base58Prefixes[MAX_BASE58_TYPES];
    std::string bech32_hrp;
    std::string strNetworkID;
    CBlock genesis;
    std::vector<uint8_t> vFixedSeeds;
    bool fDefaultConsistencyChecks;
    bool fRequireStandard;
    bool fMineBlocksOnDemand;
    bool m_is_test_chain;
    bool m_is_mockable_chain;
    CCheckpointData checkpointData;
    MapAssumeutxo m_assumeutxo_data;
    ChainTxData chainTxData;
    bool fHasHardwareWalletSupport;
};

/**
 * Creates and returns a std::unique_ptr<CChainParams> of the chosen chain.
 * @returns a CChainParams* of the chosen chain.
 * @throws a std::runtime_error if the chain is not supported.
 */
std::unique_ptr<const CChainParams> CreateChainParams(const ArgsManager& args, const std::string& chain);

/**
 * Return the currently selected parameters. This won't change after app
 * startup, except for unit tests.
 */
const CChainParams &Params();

/**
 * Sets the params returned by Params() to those for the given chain name.
 * @throws std::runtime_error when the chain is not supported.
 */
void SelectParams(const std::string& chain);

/**
 * Allows modifying the Op Sender block height regtest parameter.
 */
void UpdateOpSenderBlockHeight(int nHeight);

/**
 * Allows modifying the btc_ecrecover block height regtest parameter.
 */
void UpdateBtcEcrecoverBlockHeight(int nHeight);

/**
 * Allows modifying the constantinople block height regtest parameter.
 */
void UpdateConstantinopleBlockHeight(int nHeight);

/**
 * Allows modifying the difficulty change block height regtest parameter.
 */
void UpdateDifficultyChangeBlockHeight(int nHeight);

/**
 * Allows modifying the offline staking block height regtest parameter.
 */
void UpdateOfflineStakingBlockHeight(int nHeight);

/**
 * Allows modifying the supply control block height regtest parameter.
 */
void UpdateSupplyControlBlockHeight(int nHeight);

/**
 * Allows modifying the delegations address regtest parameter.
 */
void UpdateDelegationsAddress(const uint160& address);

/**
 * Allows modifying the supply control address regtest parameter
 */
void UpdateSupplyControlAddress(const uint160& address);

/**
 * @brief UpdateLastMPoSBlockHeight Last mpos block height
 * @param nHeight Block height
 */
void UpdateLastMPoSBlockHeight(int nHeight);

/**
 * Allows modifying the reduce block time height regtest parameter.
 */
void UpdateReduceBlocktimeHeight(int nHeight);

/**
 * Allows modifying the pow allow for min difficulty blocks regtest parameter.
 */
void UpdatePowAllowMinDifficultyBlocks(bool fValue);

/**
 * Allows modifying the pow no retargeting regtest parameter.
 */
void UpdatePowNoRetargeting(bool fValue);

/**
 * Allows modifying the pos no retargeting regtest parameter.
 */
void UpdatePoSNoRetargeting(bool fValue);

/**
 * Allows modifying the muir glacier block height regtest parameter.
 */
void UpdateMuirGlacierHeight(int nHeight);

/**
 * Allows modifying the london block height regtest parameter.
 */
void UpdateLondonHeight(int nHeight);

/**
 * Allows modifying the taproot block height regtest parameter.
 */
void UpdateTaprootHeight(int nHeight);

#endif // BITCOIN_CHAINPARAMS_H
