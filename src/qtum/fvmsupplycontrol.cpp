#include <arith_uint256.h>
#include <chainparams.h>
#include <iostream>
#include <qtum/fvmsupplycontrol.h>
#include <qtum/qtumDGP.h>
#include <util/system.h>
#include <validation.h>

const std::string supplyControlCode = "608060405234801561001057600080fd5b50600436106101a85760003560e01c80638a6f5a59116100f9578063b8f9240c11610097578063da9fc92611610071578063da9fc926146104f1578063eb9019d414610524578063f8ce560a14610554578063fe0d94c114610584576101a8565b8063b8f9240c1461049b578063d547741f146104b9578063d663fa50146104d5576101a8565b806395101181116100d357806395101181146104275780639f08040214610443578063a217fddf1461045f578063b536818a1461047d576101a8565b80638a6f5a59146103975780638fb872ba146103c757806391d14854146103f7576101a8565b806336568abe11610166578063555567c011610140578063555567c01461030f578063567813881461032d57806375b238fc1461035d5780637bcb87a91461037b576101a8565b806336568abe1461029357806342d21ef7146102af57806343859632146102df576101a8565b80624fba00146101ad57806301ffc9a7146101c957806302a251a3146101f95780631c9b2f3514610217578063248a9ca3146102475780632f2ff15d14610277575b600080fd5b6101c760048036038101906101c29190613776565b6105b4565b005b6101e360048036038101906101de91906137fb565b610696565b6040516101f09190613843565b60405180910390f35b610201610710565b60405161020e9190613877565b60405180910390f35b610231600480360381019061022c91906138be565b61071a565b60405161023e919061393c565b60405180910390f35b610261600480360381019061025c919061398d565b610765565b60405161026e91906139c9565b60405180910390f35b610291600480360381019061028c91906139e4565b610785565b005b6102ad60048036038101906102a891906139e4565b6107a6565b005b6102c960048036038101906102c491906138be565b610829565b6040516102d69190613a9b565b60405180910390f35b6102f960048036038101906102f49190613ab6565b61096d565b6040516103069190613843565b60405180910390f35b610317610981565b6040516103249190613877565b60405180910390f35b61034760048036038101906103429190613b2f565b61098a565b6040516103549190613877565b60405180910390f35b610365610aea565b60405161037291906139c9565b60405180910390f35b61039560048036038101906103909190613776565b610b0e565b005b6103b160048036038101906103ac91906138be565b610bf0565b6040516103be9190613c3e565b60405180910390f35b6103e160048036038101906103dc9190613d6a565b610d48565b6040516103ee9190613877565b60405180910390f35b610411600480360381019061040c91906139e4565b6116c2565b60405161041e9190613843565b60405180910390f35b610441600480360381019061043c9190613776565b61172d565b005b61045d60048036038101906104589190613776565b61180e565b005b610467611b2f565b60405161047491906139c9565b60405180910390f35b610485611b36565b60405161049291906139c9565b60405180910390f35b6104a3611b5a565b6040516104b09190613877565b60405180910390f35b6104d360048036038101906104ce91906139e4565b611b64565b005b6104ef60048036038101906104ea9190613776565b611b85565b005b61050b600480360381019061050691906138be565b611c66565b60405161051b949392919061414b565b60405180910390f35b61053e600480360381019061053991906141a5565b611ec7565b60405161054b9190613877565b60405180910390f35b61056e600480360381019061056991906138be565b611edb565b60405161057b9190613877565b60405180910390f35b61059e600480360381019061059991906138be565b611f05565b6040516105ab9190613877565b60405180910390f35b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610644576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063b90614242565b60405180910390fd5b61066e7fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c2177582610785565b6003600081548092919061068190614291565b91905055506106938160006001611fe9565b50565b60007f7965db0b000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061070957506107088261209c565b5b9050919050565b60006103e8905090565b610722613427565b6007600083815260200190815260200160002060405180606001604052908160008201548152602001600182015481526020016002820154815250509050919050565b600060016000838152602001908152602001600020600101549050919050565b61078e82610765565b61079781612106565b6107a1838361211a565b505050565b6107ae6121fa565b73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161461081b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108129061434b565b60405180910390fd5b6108258282612202565b5050565b60008060008084815260200190815260200160002090506000816000015403610887576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161087e906143b7565b60405180910390fd5b8060010160199054906101000a900460ff16156108a8576005915050610968565b8060010160189054906101000a900460ff16156108c9576002915050610968565b60004390508160010160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1681101561090357600092505050610968565b8160010160109054906101000a900467ffffffffffffffff1667ffffffffffffffff16811161093757600192505050610968565b610940846122e4565b8015610951575061095084612494565b5b1561096157600392505050610968565b6004925050505b919050565b600061097983836124ce565b905092915050565b60006064905090565b6000806000808581526020019081526020016000209050600160058111156109b5576109b4613a24565b5b6109be85610829565b60058111156109d0576109cf613a24565b5b14610a10576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a0790614423565b60405180910390fd5b6000610a3e338360010160089054906101000a900467ffffffffffffffff1667ffffffffffffffff16612536565b905060008111610a83576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a7a9061448f565b60405180910390fd5b610a8f8533868461254a565b3373ffffffffffffffffffffffffffffffffffffffff167f251f168c3d37dca4f3922f4aa12852da0c3de8ef70710e0cf58eba85805168a28686604051610ad79291906144be565b60405180910390a2809250505092915050565b7fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c2177581565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610b9e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b9590614242565b60405180910390fd5b610bc87f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba82611b64565b60036000815480929190610bdb906144e7565b9190505550610bed8160016000611fe9565b50565b610bf8613448565b6000808381526020019081526020016000206040518060e0016040529081600082015481526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160109054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160189054906101000a900460ff161515151581526020016001820160199054906101000a900460ff161515151581526020016002820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815250509050919050565b6000610d747fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775336116c2565b80610da55750610da47f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba336116c2565b5b610de4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ddb9061455c565b60405180910390fd5b438811610e26576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e1d906145c8565b60405180910390fd5b848490508787905014610e6e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e659061465a565b60405180910390fd5b828290508787905014610eb6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ead906146ec565b60405180910390fd5b600088604051602001610ec9919061472d565b6040516020818303038152906040528051906020012060001c90506000600960008b81526020019081526020016000206040518060800160405290816000820154815260200160018201805480602002602001604051908101604052809291908181526020018280548015610f5d57602002820191906000526020600020905b815481526020019060010190808311610f49575b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b82821015611037578382906000526020600020018054610faa90614777565b80601f0160208091040260200160405190810160405280929190818152602001828054610fd690614777565b80156110235780601f10610ff857610100808354040283529160200191611023565b820191906000526020600020905b81548152906001019060200180831161100657829003601f168201915b505050505081526020019060010190610f8b565b50505050815260200160038201805480602002602001604051908101604052809291908181526020016000905b8282101561111057838290600052602060002001805461108390614777565b80601f01602080910402602001604051908101604052809291908181526020018280546110af90614777565b80156110fc5780601f106110d1576101008083540402835291602001916110fc565b820191906000526020600020905b8154815290600101906020018083116110df57829003601f168201915b505050505081526020019060010190611064565b505050508152505090506000816000015114611161576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611158906147f4565b60405180910390fd5b6000816020015151146111a9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111a090614860565b60405180910390fd5b6000816040015151146111f1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111e8906148f2565b60405180910390fd5b600081606001515114611239576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112309061495e565b60405180910390fd5b6000600a600084815260200190815260200160002060405180608001604052908160008201548152602001600182018054806020026020016040519081016040528092919081815260200182805480156112b257602002820191906000526020600020905b81548152602001906001019080831161129e575b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b8282101561138c5783829060005260206000200180546112ff90614777565b80601f016020809104026020016040519081016040528092919081815260200182805461132b90614777565b80156113785780601f1061134d57610100808354040283529160200191611378565b820191906000526020600020905b81548152906001019060200180831161135b57829003601f168201915b5050505050815260200190600101906112e0565b50505050815260200160038201805480602002602001604051908101604052809291908181526020016000905b828210156114655783829060005260206000200180546113d890614777565b80601f016020809104026020016040519081016040528092919081815260200182805461140490614777565b80156114515780601f1061142657610100808354040283529160200191611451565b820191906000526020600020905b81548152906001019060200180831161143457829003601f168201915b5050505050815260200190600101906113b9565b5050505081525050905060008160000151146114b6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114ad906149ca565b60405180910390fd5b6000816020015151146114fe576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114f590614a5c565b60405180910390fd5b600081604001515114611546576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161153d90614aee565b60405180910390fd5b60008160600151511461158e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161158590614b80565b60405180910390fd5b898980806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f8201169050808301925050505050505081602001819052508787906115e59190614d83565b81604001819052508585906115fa9190614eec565b816060018190525080600a600085815260200190815260200160002060008201518160000155602082015181600101908051906020019061163c9291906134bd565b50604082015181600201908051906020019061165992919061350a565b506060820151816003019080519060200190611676929190613563565b50905050611683836126fe565b50827fc2c021f5d73c63c481d336fbbafec58f694fc45095f00b02d2deb8cca59afe0760405160405180910390a2829350505050979650505050505050565b60006001600084815260200190815260200160002060000160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146117bd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117b490614242565b60405180910390fd5b6117e77fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c2177582611b64565b600360008154809291906117fa906144e7565b919050555061180b81600080611fe9565b50565b600260009054906101000a900460ff161561182857600080fd5b6118356000801b33612878565b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663850d975860006040518263ffffffff1660e01b81526004016118d49190614f46565b600060405180830381865afa1580156118f1573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f8201168201806040525081019061191a9190615039565b905060008151905060005b818110156119ab576119717fa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c2177584838151811061196457611963615082565b5b6020026020010151610785565b61199883828151811061198757611986615082565b5b602002602001015160006001611fe9565b80806119a390614291565b915050611925565b506000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663850d975860016040518263ffffffff1660e01b8152600401611a0a91906150ec565b600060405180830381865afa158015611a27573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f82011682018060405250810190611a509190615039565b905060008151905060005b81811015611ae057611aa77f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba848381518110611a9a57611a99615082565b5b6020026020010151610785565b611acd838281518110611abd57611abc615082565b5b6020026020010151600180611fe9565b8080611ad890614291565b915050611a5b565b508083611aed9190615107565b600381905550611b006000801b86612878565b611b0d6000801b33611b64565b6001600260006101000a81548160ff0219169083151502179055505050505050565b6000801b81565b7f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba81565b6000600354905090565b611b6d82610765565b611b7681612106565b611b808383612202565b505050565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611c15576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611c0c90614242565b60405180910390fd5b611c3f7f0603f2636f0ca34ae3ea5a23bb826e2bd2ffd59fb1c01edc1ba10fba2899d1ba82610785565b60036000815480929190611c5290614291565b9190505550611c6381600180611fe9565b50565b600060608060606000600960008781526020019081526020016000206040518060800160405290816000820154815260200160018201805480602002602001604051908101604052809291908181526020018280548015611ce657602002820191906000526020600020905b815481526020019060010190808311611cd2575b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b82821015611dc0578382906000526020600020018054611d3390614777565b80601f0160208091040260200160405190810160405280929190818152602001828054611d5f90614777565b8015611dac5780601f10611d8157610100808354040283529160200191611dac565b820191906000526020600020905b815481529060010190602001808311611d8f57829003601f168201915b505050505081526020019060010190611d14565b50505050815260200160038201805480602002602001604051908101604052809291908181526020016000905b82821015611e99578382906000526020600020018054611e0c90614777565b80601f0160208091040260200160405190810160405280929190818152602001828054611e3890614777565b8015611e855780601f10611e5a57610100808354040283529160200191611e85565b820191906000526020600020905b815481529060010190602001808311611e6857829003601f168201915b505050505081526020019060010190611ded565b5050505081525050905080600001518160200151826040015183606001519450945094509450509193509193565b6000611ed38383612536565b905092915050565b600060016002611eea84612886565b611ef4919061516a565b611efe9190615107565b9050919050565b600060036005811115611f1b57611f1a613a24565b5b611f2483610829565b6005811115611f3657611f35613a24565b5b14611f76576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611f6d906151e7565b60405180910390fd5b6000806000848152602001908152602001600020905060018160010160196101000a81548160ff021916908315150217905550827f712ae1383f79ac853f8d882153778e0260ef8f03b504e2866e0593e04d2b291f60405160405180910390a2611fdf836128b8565b5082915050919050565b60004390506000600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905061204d818385612042576000612045565b60015b60ff16612bf3565b5050600061205c600684612c10565b9050831561207757808061206f9061522f565b915050612086565b808061208290615273565b9150505b61209260068483612bf3565b5050505050505050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b612117816121126121fa565b612c90565b50565b61212482826116c2565b6121f657600180600084815260200190815260200160002060000160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555061219b6121fa565b73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45b5050565b600033905090565b61220c82826116c2565b156122e05760006001600084815260200190815260200160002060000160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055506122856121fa565b73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16837ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b60405160405180910390a45b5050565b6000806000808481526020019081526020016000206040518060e0016040529081600082015481526020016001820160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160109054906101000a900467ffffffffffffffff1667ffffffffffffffff1667ffffffffffffffff1681526020016001820160189054906101000a900460ff161515151581526020016001820160199054906101000a900460ff161515151581526020016002820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815250509050600061244b826020015167ffffffffffffffff16611edb565b9050600060076000868152602001908152602001600020905081816001015410158061248a575081816000015482600201546124879190615107565b10155b9350505050919050565b600080600760008481526020019081526020016000209050806002015481600001546124c09190615107565b816001015411915050919050565b60006008600084815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b60006125428383612d15565b905092915050565b600060076000868152602001908152602001600020905061256b85856124ce565b156125ab576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016125a2906152e8565b60405180910390fd5b60038360ff16106125f1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016125e890615354565b60405180910390fd5b6000600281111561260557612604613a24565b5b60ff168360ff160361263157818160000160008282546126259190615107565b9250508190555061268e565b6001600281111561264557612644613a24565b5b60ff168360ff160361267157818160010160008282546126659190615107565b9250508190555061268d565b818160020160008282546126859190615107565b925050819055505b5b60016008600087815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055505050505050565b6000806000808481526020019081526020016000209050600081600001541461275c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612753906153c0565b60405180910390fd5b828160000181905550438160010160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550612798610981565b436127a39190615107565b8160010160086101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055506127d5610710565b8160010160089054906101000a900467ffffffffffffffff1667ffffffffffffffff166128029190615107565b8160010160106101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550338160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082915050919050565b612882828261211a565b5050565b6000612893600683612c10565b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff169050919050565b600080600a6000848152602001908152602001600020604051806080016040529081600082015481526020016001820180548060200260200160405190810160405280929190818152602001828054801561293257602002820191906000526020600020905b81548152602001906001019080831161291e575b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b82821015612a0c57838290600052602060002001805461297f90614777565b80601f01602080910402602001604051908101604052809291908181526020018280546129ab90614777565b80156129f85780601f106129cd576101008083540402835291602001916129f8565b820191906000526020600020905b8154815290600101906020018083116129db57829003601f168201915b505050505081526020019060010190612960565b50505050815260200160038201805480602002602001604051908101604052809291908181526020016000905b82821015612ae5578382906000526020600020018054612a5890614777565b80601f0160208091040260200160405190810160405280929190818152602001828054612a8490614777565b8015612ad15780601f10612aa657610100808354040283529160200191612ad1565b820191906000526020600020905b815481529060010190602001808311612ab457829003601f168201915b505050505081526020019060010190612a39565b50505050815250509050600a6000848152602001908152602001600020600080820160009055600182016000612b1b91906135bc565b600282016000612b2b91906135dd565b600382016000612b3b91906135fe565b50506000600960008360000151815260200190815260200160002090508381600001819055508160200151816001019080519060200190612b7d9291906134bd565b508160400151816002019080519060200190612b9a92919061350a565b508160600151816003019080519060200190612bb7929190613563565b5081600001517ffd97efaeec370430401c335a89c9485668b53055a6507f1764ca4c8d4b4e590760405160405180910390a28392505050919050565b600080612c04856000018585612d8a565b91509150935093915050565b600080836000018054905090506000612c2f8560000185600085613110565b905060008114612c8357612c5285600001600183612c4d91906153e0565b613183565b60000160049054906101000a90047bffffffffffffffffffffffffffffffffffffffffffffffffffffffff16612c86565b60005b9250505092915050565b612c9a82826116c2565b612d1157612ca781613198565b612cb58360001c60206131c5565b604051602001612cc69291906154e8565b6040516020818303038152906040526040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612d08919061555b565b60405180910390fd5b5050565b600080600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209050612d638184612c10565b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1691505092915050565b6000806000858054905090506000811115613020576000612db787600184612db291906153e0565b613183565b6040518060400160405290816000820160009054906101000a900463ffffffff1663ffffffff1663ffffffff1681526020016000820160049054906101000a90047bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff168152505090508563ffffffff16816000015163ffffffff161115612eab576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612ea2906155c9565b60405180910390fd5b8563ffffffff16816000015163ffffffff1603612f2f5784612ed988600185612ed491906153e0565b613183565b60000160046101000a8154817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff02191690837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff16021790555061300f565b8660405180604001604052808863ffffffff168152602001877bffffffffffffffffffffffffffffffffffffffffffffffffffffffff168152509080600181540180825580915050600190039060005260206000200160009091909190915060008201518160000160006101000a81548163ffffffff021916908363ffffffff16021790555060208201518160000160046101000a8154817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff02191690837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff16021790555050505b806020015185935093505050613108565b8560405180604001604052808763ffffffff168152602001867bffffffffffffffffffffffffffffffffffffffffffffffffffffffff168152509080600181540180825580915050600190039060005260206000200160009091909190915060008201518160000160006101000a81548163ffffffff021916908363ffffffff16021790555060208201518160000160046101000a8154817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff02191690837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff160217905550505060008492509250505b935093915050565b60005b818310156131785760006131278484613401565b90508463ffffffff1661313a8783613183565b60000160009054906101000a900463ffffffff1663ffffffff16111561316257809250613172565b60018161316f9190615107565b93505b50613113565b819050949350505050565b60008260005281602060002001905092915050565b60606131be8273ffffffffffffffffffffffffffffffffffffffff16601460ff166131c5565b9050919050565b6060600060028360026131d891906155e9565b6131e29190615107565b67ffffffffffffffff8111156131fb576131fa614ba0565b5b6040519080825280601f01601f19166020018201604052801561322d5781602001600182028036833780820191505090505b5090507f30000000000000000000000000000000000000000000000000000000000000008160008151811061326557613264615082565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053507f7800000000000000000000000000000000000000000000000000000000000000816001815181106132c9576132c8615082565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053506000600184600261330991906155e9565b6133139190615107565b90505b60018111156133b3577f3031323334353637383961626364656600000000000000000000000000000000600f86166010811061335557613354615082565b5b1a60f81b82828151811061336c5761336b615082565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600485901c9450806133ac906144e7565b9050613316565b50600084146133f7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016133ee90615677565b60405180910390fd5b8091505092915050565b60006002828418613412919061516a565b82841661341f9190615107565b905092915050565b60405180606001604052806000815260200160008152602001600081525090565b6040518060e0016040528060008152602001600067ffffffffffffffff168152602001600067ffffffffffffffff168152602001600067ffffffffffffffff168152602001600015158152602001600015158152602001600073ffffffffffffffffffffffffffffffffffffffff1681525090565b8280548282559060005260206000209081019282156134f9579160200282015b828111156134f85782518255916020019190600101906134dd565b5b509050613506919061361f565b5090565b828054828255906000526020600020908101928215613552579160200282015b828111156135515782518290816135419190615839565b509160200191906001019061352a565b5b50905061355f919061363c565b5090565b8280548282559060005260206000209081019282156135ab579160200282015b828111156135aa57825182908161359a9190615966565b5091602001919060010190613583565b5b5090506135b89190613660565b5090565b50805460008255906000526020600020908101906135da919061361f565b50565b50805460008255906000526020600020908101906135fb919061363c565b50565b508054600082559060005260206000209081019061361c9190613660565b50565b5b80821115613638576000816000905550600101613620565b5090565b5b8082111561365c57600081816136539190613684565b5060010161363d565b5090565b5b80821115613680576000818161367791906136c4565b50600101613661565b5090565b50805461369090614777565b6000825580601f106136a257506136c1565b601f0160209004906000526020600020908101906136c0919061361f565b5b50565b5080546136d090614777565b6000825580601f106136e25750613701565b601f016020900490600052602060002090810190613700919061361f565b5b50565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061374382613718565b9050919050565b61375381613738565b811461375e57600080fd5b50565b6000813590506137708161374a565b92915050565b60006020828403121561378c5761378b61370e565b5b600061379a84828501613761565b91505092915050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b6137d8816137a3565b81146137e357600080fd5b50565b6000813590506137f5816137cf565b92915050565b6000602082840312156138115761381061370e565b5b600061381f848285016137e6565b91505092915050565b60008115159050919050565b61383d81613828565b82525050565b60006020820190506138586000830184613834565b92915050565b6000819050919050565b6138718161385e565b82525050565b600060208201905061388c6000830184613868565b92915050565b61389b8161385e565b81146138a657600080fd5b50565b6000813590506138b881613892565b92915050565b6000602082840312156138d4576138d361370e565b5b60006138e2848285016138a9565b91505092915050565b6138f48161385e565b82525050565b60608201600082015161391060008501826138eb565b50602082015161392360208501826138eb565b50604082015161393660408501826138eb565b50505050565b600060608201905061395160008301846138fa565b92915050565b6000819050919050565b61396a81613957565b811461397557600080fd5b50565b60008135905061398781613961565b92915050565b6000602082840312156139a3576139a261370e565b5b60006139b184828501613978565b91505092915050565b6139c381613957565b82525050565b60006020820190506139de60008301846139ba565b92915050565b600080604083850312156139fb576139fa61370e565b5b6000613a0985828601613978565b9250506020613a1a85828601613761565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110613a6457613a63613a24565b5b50565b6000819050613a7582613a53565b919050565b6000613a8582613a67565b9050919050565b613a9581613a7a565b82525050565b6000602082019050613ab06000830184613a8c565b92915050565b60008060408385031215613acd57613acc61370e565b5b6000613adb858286016138a9565b9250506020613aec85828601613761565b9150509250929050565b600060ff82169050919050565b613b0c81613af6565b8114613b1757600080fd5b50565b600081359050613b2981613b03565b92915050565b60008060408385031215613b4657613b4561370e565b5b6000613b54858286016138a9565b9250506020613b6585828601613b1a565b9150509250929050565b600067ffffffffffffffff82169050919050565b613b8c81613b6f565b82525050565b613b9b81613828565b82525050565b613baa81613738565b82525050565b60e082016000820151613bc660008501826138eb565b506020820151613bd96020850182613b83565b506040820151613bec6040850182613b83565b506060820151613bff6060850182613b83565b506080820151613c126080850182613b92565b5060a0820151613c2560a0850182613b92565b5060c0820151613c3860c0850182613ba1565b50505050565b600060e082019050613c536000830184613bb0565b92915050565b600080fd5b600080fd5b600080fd5b60008083601f840112613c7e57613c7d613c59565b5b8235905067ffffffffffffffff811115613c9b57613c9a613c5e565b5b602083019150836020820283011115613cb757613cb6613c63565b5b9250929050565b60008083601f840112613cd457613cd3613c59565b5b8235905067ffffffffffffffff811115613cf157613cf0613c5e565b5b602083019150836020820283011115613d0d57613d0c613c63565b5b9250929050565b60008083601f840112613d2a57613d29613c59565b5b8235905067ffffffffffffffff811115613d4757613d46613c5e565b5b602083019150836020820283011115613d6357613d62613c63565b5b9250929050565b60008060008060008060006080888a031215613d8957613d8861370e565b5b6000613d978a828b016138a9565b975050602088013567ffffffffffffffff811115613db857613db7613713565b5b613dc48a828b01613c68565b9650965050604088013567ffffffffffffffff811115613de757613de6613713565b5b613df38a828b01613cbe565b9450945050606088013567ffffffffffffffff811115613e1657613e15613713565b5b613e228a828b01613d14565b925092505092959891949750929550565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000613e6b83836138eb565b60208301905092915050565b6000602082019050919050565b6000613e8f82613e33565b613e998185613e3e565b9350613ea483613e4f565b8060005b83811015613ed5578151613ebc8882613e5f565b9750613ec783613e77565b925050600181019050613ea8565b5085935050505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b60005b83811015613f48578082015181840152602081019050613f2d565b60008484015250505050565b6000601f19601f8301169050919050565b6000613f7082613f0e565b613f7a8185613f19565b9350613f8a818560208601613f2a565b613f9381613f54565b840191505092915050565b6000613faa8383613f65565b905092915050565b6000602082019050919050565b6000613fca82613ee2565b613fd48185613eed565b935083602082028501613fe685613efe565b8060005b8581101561402257848403895281516140038582613f9e565b945061400e83613fb2565b925060208a01995050600181019050613fea565b50829750879550505050505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b600061408782614060565b614091818561406b565b93506140a1818560208601613f2a565b6140aa81613f54565b840191505092915050565b60006140c1838361407c565b905092915050565b6000602082019050919050565b60006140e182614034565b6140eb818561403f565b9350836020820285016140fd85614050565b8060005b85811015614139578484038952815161411a85826140b5565b9450614125836140c9565b925060208a01995050600181019050614101565b50829750879550505050505092915050565b60006080820190506141606000830187613868565b81810360208301526141728186613e84565b905081810360408301526141868185613fbf565b9050818103606083015261419a81846140d6565b905095945050505050565b600080604083850312156141bc576141bb61370e565b5b60006141ca85828601613761565b92505060206141db858286016138a9565b9150509250929050565b600082825260208201905092915050565b7f4e6f74207174756d20636f6e7472616374206164647265737300000000000000600082015250565b600061422c6019836141e5565b9150614237826141f6565b602082019050919050565b6000602082019050818103600083015261425b8161421f565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061429c8261385e565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036142ce576142cd614262565b5b600182019050919050565b7f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636560008201527f20726f6c657320666f722073656c660000000000000000000000000000000000602082015250565b6000614335602f836141e5565b9150614340826142d9565b604082019050919050565b6000602082019050818103600083015261436481614328565b9050919050565b7f70726f706f73616c206973206e6f742065786973747300000000000000000000600082015250565b60006143a16016836141e5565b91506143ac8261436b565b602082019050919050565b600060208201905081810360008301526143d081614394565b9050919050565b7f70726f706f73616c206973206e6f742061637469766500000000000000000000600082015250565b600061440d6016836141e5565b9150614418826143d7565b602082019050919050565b6000602082019050818103600083015261443c81614400565b9050919050565b7f6e6f20766f746520726967687400000000000000000000000000000000000000600082015250565b6000614479600d836141e5565b915061448482614443565b602082019050919050565b600060208201905081810360008301526144a88161446c565b9050919050565b6144b881613af6565b82525050565b60006040820190506144d36000830185613868565b6144e060208301846144af565b9392505050565b60006144f28261385e565b91506000820361450557614504614262565b5b600182039050919050565b7f4e6f7420612061646d696e206f7220676f762061636f6f756e74000000000000600082015250565b6000614546601a836141e5565b915061455182614510565b602082019050919050565b6000602082019050818103600083015261457581614539565b9050919050565b7f626c6f636b206e756d62657220697320616c7265616479207061737300000000600082015250565b60006145b2601c836141e5565b91506145bd8261457c565b602082019050919050565b600060208201905081810360008301526145e1816145a5565b9050919050565b7f6c656e67746873206f66205f616d6f756e747320616e64205f7363726970745460008201527f797065732073686f756c6420626520657175616c000000000000000000000000602082015250565b60006146446034836141e5565b915061464f826145e8565b604082019050919050565b6000602082019050818103600083015261467381614637565b9050919050565b7f6c656e67746873206f66205f616d6f756e747320616e64205f7363726970747360008201527f2073686f756c6420626520657175616c00000000000000000000000000000000602082015250565b60006146d66030836141e5565b91506146e18261467a565b604082019050919050565b60006020820190508181036000830152614705816146c9565b9050919050565b6000819050919050565b6147276147228261385e565b61470c565b82525050565b60006147398284614716565b60208201915081905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061478f57607f821691505b6020821081036147a2576147a1614748565b5b50919050565b7f6d696e7420697320616c72656164792063726561746564000000000000000000600082015250565b60006147de6017836141e5565b91506147e9826147a8565b602082019050919050565b6000602082019050818103600083015261480d816147d1565b9050919050565b7f6c697374206f6620616d6f756e74732073686f756c6420626520656d70747900600082015250565b600061484a601f836141e5565b915061485582614814565b602082019050919050565b600060208201905081810360008301526148798161483d565b9050919050565b7f6c697374206f662073637269707454797065732073686f756c6420626520656d60008201527f7074790000000000000000000000000000000000000000000000000000000000602082015250565b60006148dc6023836141e5565b91506148e782614880565b604082019050919050565b6000602082019050818103600083015261490b816148cf565b9050919050565b7f6c697374206f6620736372697074732073686f756c6420626520656d70747900600082015250565b6000614948601f836141e5565b915061495382614912565b602082019050919050565b600060208201905081810360008301526149778161493b565b9050919050565b7f70726f706f73616c20697320616c726561647920637265617465640000000000600082015250565b60006149b4601b836141e5565b91506149bf8261497e565b602082019050919050565b600060208201905081810360008301526149e3816149a7565b9050919050565b7f5b70726f706f73616c5d206c697374206f6620616d6f756e74732073686f756c60008201527f6420626520656d70747900000000000000000000000000000000000000000000602082015250565b6000614a46602a836141e5565b9150614a51826149ea565b604082019050919050565b60006020820190508181036000830152614a7581614a39565b9050919050565b7f5b70726f706f73616c5d206c697374206f66207363726970745479706573207360008201527f686f756c6420626520656d707479000000000000000000000000000000000000602082015250565b6000614ad8602e836141e5565b9150614ae382614a7c565b604082019050919050565b60006020820190508181036000830152614b0781614acb565b9050919050565b7f5b70726f706f73616c5d206c697374206f6620736372697074732073686f756c60008201527f6420626520656d70747900000000000000000000000000000000000000000000602082015250565b6000614b6a602a836141e5565b9150614b7582614b0e565b604082019050919050565b60006020820190508181036000830152614b9981614b5d565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b614bd882613f54565b810181811067ffffffffffffffff82111715614bf757614bf6614ba0565b5b80604052505050565b6000614c0a613704565b9050614c168282614bcf565b919050565b600067ffffffffffffffff821115614c3657614c35614ba0565b5b602082029050602081019050919050565b600080fd5b600067ffffffffffffffff821115614c6757614c66614ba0565b5b614c7082613f54565b9050602081019050919050565b82818337600083830152505050565b6000614c9f614c9a84614c4c565b614c00565b905082815260208101848484011115614cbb57614cba614c47565b5b614cc6848285614c7d565b509392505050565b600082601f830112614ce357614ce2613c59565b5b8135614cf3848260208601614c8c565b91505092915050565b6000614d0f614d0a84614c1b565b614c00565b90508083825260208201905060208402830185811115614d3257614d31613c63565b5b835b81811015614d7957803567ffffffffffffffff811115614d5757614d56613c59565b5b808601614d648982614cce565b85526020850194505050602081019050614d34565b5050509392505050565b6000614d90368484614cfc565b905092915050565b600067ffffffffffffffff821115614db357614db2614ba0565b5b602082029050602081019050919050565b600067ffffffffffffffff821115614ddf57614dde614ba0565b5b614de882613f54565b9050602081019050919050565b6000614e08614e0384614dc4565b614c00565b905082815260208101848484011115614e2457614e23614c47565b5b614e2f848285614c7d565b509392505050565b600082601f830112614e4c57614e4b613c59565b5b8135614e5c848260208601614df5565b91505092915050565b6000614e78614e7384614d98565b614c00565b90508083825260208201905060208402830185811115614e9b57614e9a613c63565b5b835b81811015614ee257803567ffffffffffffffff811115614ec057614ebf613c59565b5b808601614ecd8982614e37565b85526020850194505050602081019050614e9d565b5050509392505050565b6000614ef9368484614e65565b905092915050565b6000819050919050565b6000819050919050565b6000614f30614f2b614f2684614f01565b614f0b565b61385e565b9050919050565b614f4081614f15565b82525050565b6000602082019050614f5b6000830184614f37565b92915050565b600067ffffffffffffffff821115614f7c57614f7b614ba0565b5b602082029050602081019050919050565b600081519050614f9c8161374a565b92915050565b6000614fb5614fb084614f61565b614c00565b90508083825260208201905060208402830185811115614fd857614fd7613c63565b5b835b818110156150015780614fed8882614f8d565b845260208401935050602081019050614fda565b5050509392505050565b600082601f8301126150205761501f613c59565b5b8151615030848260208601614fa2565b91505092915050565b60006020828403121561504f5761504e61370e565b5b600082015167ffffffffffffffff81111561506d5761506c613713565b5b6150798482850161500b565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6000819050919050565b60006150d66150d16150cc846150b1565b614f0b565b61385e565b9050919050565b6150e6816150bb565b82525050565b600060208201905061510160008301846150dd565b92915050565b60006151128261385e565b915061511d8361385e565b925082820190508082111561513557615134614262565b5b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b60006151758261385e565b91506151808361385e565b9250826151905761518f61513b565b5b828204905092915050565b7f50726f706f73616c206973206e6f742073756363657373656400000000000000600082015250565b60006151d16019836141e5565b91506151dc8261519b565b602082019050919050565b60006020820190508181036000830152615200816151c4565b9050919050565b60007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff82169050919050565b600061523a82615207565b91507bffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361526857615267614262565b5b600182019050919050565b600061527e82615207565b91506000820361529157615290614262565b5b600182039050919050565b7f616c726561647920766f74650000000000000000000000000000000000000000600082015250565b60006152d2600c836141e5565b91506152dd8261529c565b602082019050919050565b60006020820190508181036000830152615301816152c5565b9050919050565b7f696e76616c696420766f74650000000000000000000000000000000000000000600082015250565b600061533e600c836141e5565b915061534982615308565b602082019050919050565b6000602082019050818103600083015261536d81615331565b9050919050565b7f70726f706f73616c20616c726561647920657869737473000000000000000000600082015250565b60006153aa6017836141e5565b91506153b582615374565b602082019050919050565b600060208201905081810360008301526153d98161539d565b9050919050565b60006153eb8261385e565b91506153f68361385e565b925082820390508181111561540e5761540d614262565b5b92915050565b600081905092915050565b7f416363657373436f6e74726f6c3a206163636f756e7420000000000000000000600082015250565b6000615455601783615414565b91506154608261541f565b601782019050919050565b600061547682613f0e565b6154808185615414565b9350615490818560208601613f2a565b80840191505092915050565b7f206973206d697373696e6720726f6c6520000000000000000000000000000000600082015250565b60006154d2601183615414565b91506154dd8261549c565b601182019050919050565b60006154f382615448565b91506154ff828561546b565b915061550a826154c5565b9150615516828461546b565b91508190509392505050565b600061552d82613f0e565b61553781856141e5565b9350615547818560208601613f2a565b61555081613f54565b840191505092915050565b600060208201905081810360008301526155758184615522565b905092915050565b7f436865636b706f696e743a2064656372656173696e67206b6579730000000000600082015250565b60006155b3601b836141e5565b91506155be8261557d565b602082019050919050565b600060208201905081810360008301526155e2816155a6565b9050919050565b60006155f48261385e565b91506155ff8361385e565b925082820261560d8161385e565b9150828204841483151761562457615623614262565b5b5092915050565b7f537472696e67733a20686578206c656e67746820696e73756666696369656e74600082015250565b60006156616020836141e5565b915061566c8261562b565b602082019050919050565b6000602082019050818103600083015261569081615654565b9050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026156f97fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826156bc565b61570386836156bc565b95508019841693508086168417925050509392505050565b600061573661573161572c8461385e565b614f0b565b61385e565b9050919050565b6000819050919050565b6157508361571b565b61576461575c8261573d565b8484546156c9565b825550505050565b600090565b61577961576c565b615784818484615747565b505050565b5b818110156157a85761579d600082615771565b60018101905061578a565b5050565b601f8211156157ed576157be81615697565b6157c7846156ac565b810160208510156157d6578190505b6157ea6157e2856156ac565b830182615789565b50505b505050565b600082821c905092915050565b6000615810600019846008026157f2565b1980831691505092915050565b600061582983836157ff565b9150826002028217905092915050565b61584282613f0e565b67ffffffffffffffff81111561585b5761585a614ba0565b5b6158658254614777565b6158708282856157ac565b600060209050601f8311600181146158a35760008415615891578287015190505b61589b858261581d565b865550615903565b601f1984166158b186615697565b60005b828110156158d9578489015182556001820191506020850194506020810190506158b4565b868310156158f657848901516158f2601f8916826157ff565b8355505b6001600288020188555050505b505050505050565b60008190508160005260206000209050919050565b601f821115615961576159328161590b565b61593b846156ac565b8101602085101561594a578190505b61595e615956856156ac565b830182615789565b50505b505050565b61596f82614060565b67ffffffffffffffff81111561598857615987614ba0565b5b6159928254614777565b61599d828285615920565b600060209050601f8311600181146159d057600084156159be578287015190505b6159c8858261581d565b865550615a30565b601f1984166159de8661590b565b60005b82811015615a06578489015182556001820191506020850194506020810190506159e1565b86831015615a235784890151615a1f601f8916826157ff565b8355505b6001600288020188555050505b50505050505056fea264697066735822122031acd161af258110bfd428d422a9b479e517b19e5243d6e704ff885a2e2a514e64736f6c63430008120033";
const std::string supplyControlABI = "[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"block\",\"type\":\"uint256\"}],\"name\":\"MintAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"proposalID\",\"type\":\"uint256\"}],\"name\":\"ProposalCancalled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"proposalID\",\"type\":\"uint256\"}],\"name\":\"ProposalCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"proposalID\",\"type\":\"uint256\"}],\"name\":\"ProposalExecuted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"previousAdminRole\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"newAdminRole\",\"type\":\"bytes32\"}],\"name\":\"RoleAdminChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"RoleGranted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"RoleRevoked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"voter\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"proposalID\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"casted\",\"type\":\"uint8\"}],\"name\":\"VoteCast\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"ADMIN_ROLE\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"DEFAULT_ADMIN_ROLE\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"GOV_ROLE\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"addAdminAddress\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"addGovAddress\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"proposalId\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"support\",\"type\":\"uint8\"}],\"name\":\"castVote\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"proposalId\",\"type\":\"uint256\"}],\"name\":\"execute\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_block\",\"type\":\"uint256\"}],\"name\":\"getMint\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"proposalId\",\"type\":\"uint256\"},{\"internalType\":\"uint256[]\",\"name\":\"amounts\",\"type\":\"uint256[]\"},{\"internalType\":\"string[]\",\"name\":\"scriptTypes\",\"type\":\"string[]\"},{\"internalType\":\"bytes[]\",\"name\":\"scripts\",\"type\":\"bytes[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"proposalId\",\"type\":\"uint256\"}],\"name\":\"getProposalMeta\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"proposalID\",\"type\":\"uint256\"},{\"internalType\":\"uint64\",\"name\":\"proposedAt\",\"type\":\"uint64\"},{\"internalType\":\"uint64\",\"name\":\"voteStart\",\"type\":\"uint64\"},{\"internalType\":\"uint64\",\"name\":\"voteEnd\",\"type\":\"uint64\"},{\"internalType\":\"bool\",\"name\":\"canceled\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"executed\",\"type\":\"bool\"},{\"internalType\":\"address\",\"name\":\"proposer\",\"type\":\"address\"}],\"internalType\":\"structVotable.ProposalMeta\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"proposalId\",\"type\":\"uint256\"}],\"name\":\"getProposalVote\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"againstVotes\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"forVotes\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"abstainVotes\",\"type\":\"uint256\"}],\"internalType\":\"structSimpleVotable.ProposalVote\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"}],\"name\":\"getRoleAdmin\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"timepoint\",\"type\":\"uint256\"}],\"name\":\"getVotes\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"grantRole\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"hasRole\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"proposalId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"hasVoted\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_block\",\"type\":\"uint256\"},{\"internalType\":\"uint256[]\",\"name\":\"_amounts\",\"type\":\"uint256[]\"},{\"internalType\":\"string[]\",\"name\":\"_scriptTypes\",\"type\":\"string[]\"},{\"internalType\":\"bytes[]\",\"name\":\"_scripts\",\"type\":\"bytes[]\"}],\"name\":\"propose\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"timepoint\",\"type\":\"uint256\"}],\"name\":\"quorum\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"removeAdminAddress\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"removeGovAddress\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"renounceRole\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"revokeRole\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_qtumContractAddress\",\"type\":\"address\"}],\"name\":\"setDGPContract\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"proposalId\",\"type\":\"uint256\"}],\"name\":\"status\",\"outputs\":[{\"internalType\":\"enumIVotable.ProposalStatus\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes4\",\"name\":\"interfaceId\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"totalAdminOrGovs\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"votingDeley\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"votingPeriod\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]";
const ContractABI contractSupplyControlABI = supplyControlABI;

FVMSupplyControl::FVMSupplyControl()
{
    supplyControlAddress = uintToh160(Params().GetConsensus().supplyControlAddress);
}

bool FVMSupplyControl::GetMint(int nHeight, std::vector<Mint> &out, CChainState &chain) {
    const static std::string method = "getMint";
    const auto abi = contractSupplyControlABI[method];

    std::vector<std::vector<std::string>> inputValues = {
        {i64tostr(nHeight)},
    };

    std::vector<ParameterABI::ErrorType> inputErrors;
    std::string inputData;

    if (!abi.abiIn(inputValues, inputData, inputErrors)) {
        return error("Fail to constuct input data");
    }

    std::vector<ResultExecute> execResults;
    {
        LOCK(cs_main);
        execResults = CallContract(supplyControlAddress, ParseHex(inputData), chain);
    }

    if (execResults.size() < 1) {
        return error("Fail to CallContract to get mint requests");
    }
    
    std::string outputData = HexStr(execResults[0].execRes.output);
    std::vector<std::vector<std::string>> outputValues;
    std::vector<ParameterABI::ErrorType> outputErrors;
    if (!abi.abiOut(outputData, outputValues, outputErrors)) {
        return error("Failed to deserialize get mint output parameters");
    }

    if (outputValues.size() != abi.outputs.size()) {
        return error("Failed to deserialize get poa output, size doesn't match");
    }

    std::vector<CAmount> amounts;
    std::vector<std::string> scriptsTypes;
    std::vector<CScript> scripts;
    try {
        for (std::size_t i = 0; i < outputValues.size(); i++) {

            std::vector<std::string> value = outputValues[i];

            std::string name = abi.outputs[i].name;
            if (name == "proposalId") {
                // don't need it now
            } else if (name == "amounts") {
                for (auto const &v: value) {
                    amounts.emplace_back(atoi64(v));
                }
            } else if (name == "scriptTypes") {
                scriptsTypes = value;
            } else if (name == "scripts") {
                for (auto const &v: value) {
                    auto script = ParseHex(v);
                    scripts.emplace_back(script.begin(), script.end());
                }
            } else {
                return error("Invalid get supply control output name");
            }
        }
    } catch(...) {
        return error("Invalid get supply control");
    }

    if (amounts.size() != scriptsTypes.size()) {
        return error("Invalid script types size");
    }

    if (amounts.size() != scripts.size()) {
        return error("Invalid scripts size");
    }

    for (size_t i = 0; i < amounts.size(); i++) {
        out.emplace_back(scriptsTypes[i], scripts[i], amounts[i]);
    }

    return true;
}
